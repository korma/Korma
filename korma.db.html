<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>korma.db documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Korma 0.5.0-RC1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>korma</span></div></div></li><li class="depth-2 branch"><a href="korma.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 current"><a href="korma.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="korma.db.html#var-*current-conn*"><div class="inner"><span>*current-conn*</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-*current-db*"><div class="inner"><span>*current-db*</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-_default"><div class="inner"><span>_default</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-c3p0-enabled.3F"><div class="inner"><span>c3p0-enabled?</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-connection-pool"><div class="inner"><span>connection-pool</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-create-db"><div class="inner"><span>create-db</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-default-connection"><div class="inner"><span>default-connection</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-defdb"><div class="inner"><span>defdb</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-delay-pool"><div class="inner"><span>delay-pool</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-do-query"><div class="inner"><span>do-query</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-extract-options"><div class="inner"><span>extract-options</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-firebird"><div class="inner"><span>firebird</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-get-connection"><div class="inner"><span>get-connection</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-h2"><div class="inner"><span>h2</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-is-rollback.3F"><div class="inner"><span>is-rollback?</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-msaccess"><div class="inner"><span>msaccess</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-mssql"><div class="inner"><span>mssql</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-mysql"><div class="inner"><span>mysql</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-odbc"><div class="inner"><span>odbc</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-oracle"><div class="inner"><span>oracle</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-postgres"><div class="inner"><span>postgres</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-resolve-new"><div class="inner"><span>resolve-new</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-rollback"><div class="inner"><span>rollback</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-sqlite3"><div class="inner"><span>sqlite3</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-transaction"><div class="inner"><span>transaction</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-vertica"><div class="inner"><span>vertica</span></div></a></li><li class="depth-1"><a href="korma.db.html#var-with-db"><div class="inner"><span>with-db</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">korma.db</h2><div class="doc"><pre class="plaintext">Functions for creating and managing database specifications.
</pre></div><div class="public anchor" id="var-*current-conn*"><h3>*current-conn*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L9">view source</a></div></div><div class="public anchor" id="var-*current-db*"><h3>*current-db*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L8">view source</a></div></div><div class="public anchor" id="var-_default"><h3>_default</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L6">view source</a></div></div><div class="public anchor" id="var-c3p0-enabled.3F"><h3>c3p0-enabled?</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L44">view source</a></div></div><div class="public anchor" id="var-connection-pool"><h3>connection-pool</h3><div class="usage"><code>(connection-pool {:keys [connection-uri subprotocol subname classname excess-timeout idle-timeout initial-pool-size minimum-pool-size maximum-pool-size test-connection-query idle-connection-test-period test-connection-on-checkin test-connection-on-checkout], :or {maximum-pool-size 15, idle-timeout (* 3 60 60), excess-timeout (* 30 60), idle-connection-test-period 0, test-connection-query nil, test-connection-on-checkin false, test-connection-on-checkout false, initial-pool-size 3, minimum-pool-size 3}, :as spec})</code></div><div class="doc"><pre class="plaintext">Create a connection pool for the given database spec.
</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L54">view source</a></div></div><div class="public anchor" id="var-create-db"><h3>create-db</h3><div class="usage"><code>(create-db spec)</code></div><div class="doc"><pre class="plaintext">Create a db connection object manually instead of using defdb. This is often
useful for creating connections dynamically, and probably should be followed
up with:

(default-connection my-new-conn)

If the spec includes `:make-pool? true` makes a connection pool from the spec.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L135">view source</a></div></div><div class="public anchor" id="var-default-connection"><h3>default-connection</h3><div class="usage"><code>(default-connection conn)</code></div><div class="doc"><pre class="plaintext">Set the database connection that Korma should use by default when no
alternative is specified.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L32">view source</a></div></div><div class="public anchor" id="var-defdb"><h3>defdb</h3><h4 class="type">macro</h4><div class="usage"><code>(defdb db-name spec)</code></div><div class="doc"><pre class="plaintext">Define a database specification. The last evaluated defdb will be used by
default for all queries where no database is specified by the entity.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L150">view source</a></div></div><div class="public anchor" id="var-delay-pool"><h3>delay-pool</h3><div class="usage"><code>(delay-pool spec)</code></div><div class="doc"><pre class="plaintext">Return a delay for creating a connection pool for the given spec.
</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L97">view source</a></div></div><div class="public anchor" id="var-do-query"><h3>do-query</h3><div class="usage"><code>(do-query {:keys [db], :as query})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L306">view source</a></div></div><div class="public anchor" id="var-extract-options"><h3>extract-options</h3><div class="usage"><code>(extract-options {:keys [naming delimiters alias-delimiter]})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L25">view source</a></div></div><div class="public anchor" id="var-firebird"><h3>firebird</h3><div class="usage"><code>(firebird {:keys [host port db], :or {host &quot;localhost&quot;, port 3050, db &quot;&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a FirebirdSQL database. Opts should include
keys for :db, :user, :password. You can also optionally set host, port and make-pool?</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L158">view source</a></div></div><div class="public anchor" id="var-get-connection"><h3>get-connection</h3><div class="usage"><code>(get-connection db)</code></div><div class="doc"><pre class="plaintext">Get a connection from the potentially delayed connection object.
</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L102">view source</a></div></div><div class="public anchor" id="var-h2"><h3>h2</h3><div class="usage"><code>(h2 {:keys [db], :or {db &quot;h2.db&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a h2 database. Opts should include a key
for :db which is the path to the database file.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L255">view source</a></div></div><div class="public anchor" id="var-is-rollback.3F"><h3>is-rollback?</h3><div class="usage"><code>(is-rollback?)</code></div><div class="doc"><pre class="plaintext">Returns true if the current transaction will be rolled back
</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L285">view source</a></div></div><div class="public anchor" id="var-msaccess"><h3>msaccess</h3><div class="usage"><code>(msaccess {:keys [db], :or {db &quot;&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a Microsoft Access database. Opts
should include keys for :db and optionally :make-pool?.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L222">view source</a></div></div><div class="public anchor" id="var-mssql"><h3>mssql</h3><div class="usage"><code>(mssql {:keys [user password db host port], :or {user &quot;dbuser&quot;, password &quot;dbpassword&quot;, db &quot;&quot;, host &quot;localhost&quot;, port 1433}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a mssql database. Opts should include keys
for :db, :user, and :password. You can also optionally set host and port.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L212">view source</a></div></div><div class="public anchor" id="var-mysql"><h3>mysql</h3><div class="usage"><code>(mysql {:keys [host port db], :or {host &quot;localhost&quot;, port 3306, db &quot;&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a mysql database. Opts should include keys
for :db, :user, and :password. You can also optionally set host and port.
Delimiters are automatically set to &quot;`&quot;.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L190">view source</a></div></div><div class="public anchor" id="var-odbc"><h3>odbc</h3><div class="usage"><code>(odbc {:keys [dsn], :or {dsn &quot;&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for an ODBC DSN. Opts
should include keys for :dsn and optionally :make-pool?.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L235">view source</a></div></div><div class="public anchor" id="var-oracle"><h3>oracle</h3><div class="usage"><code>(oracle {:keys [host port], :or {host &quot;localhost&quot;, port 1521}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for an Oracle database. Opts should include keys
for :user and :password. You can also optionally set host and port.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L180">view source</a></div></div><div class="public anchor" id="var-postgres"><h3>postgres</h3><div class="usage"><code>(postgres {:keys [host port db], :or {host &quot;localhost&quot;, port 5432, db &quot;&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a postgres database. Opts should include
keys for :db, :user, and :password. You can also optionally set host and
port.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L169">view source</a></div></div><div class="public anchor" id="var-resolve-new"><h3>resolve-new</h3><h4 class="type">macro</h4><div class="usage"><code>(resolve-new class)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L50">view source</a></div></div><div class="public anchor" id="var-rollback"><h3>rollback</h3><div class="usage"><code>(rollback)</code></div><div class="doc"><pre class="plaintext">Tell this current transaction to rollback.
</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L280">view source</a></div></div><div class="public anchor" id="var-sqlite3"><h3>sqlite3</h3><div class="usage"><code>(sqlite3 {:keys [db], :or {db &quot;sqlite.db&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a SQLite3 database. Opts should include a
key for :db which is the path to the database file.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L245">view source</a></div></div><div class="public anchor" id="var-transaction"><h3>transaction</h3><h4 class="type">macro</h4><div class="usage"><code>(transaction body)</code><code>(transaction options &amp; body)</code></div><div class="doc"><pre class="plaintext">Execute all queries within the body in a single transaction.
Optionally takes as a first argument a map to specify the :isolation and :read-only? properties of the transaction.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L265">view source</a></div></div><div class="public anchor" id="var-vertica"><h3>vertica</h3><div class="usage"><code>(vertica {:keys [host port db], :or {host &quot;localhost&quot;, port 5433, db &quot;&quot;}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a database specification for a vertica database. Opts should include keys
for :db, :user, and :password. You can also optionally set host and port.
Delimiters are automatically set to &quot;`&quot;.</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L201">view source</a></div></div><div class="public anchor" id="var-with-db"><h3>with-db</h3><h4 class="type">macro</h4><div class="usage"><code>(with-db db &amp; body)</code></div><div class="doc"><pre class="plaintext">Execute all queries within the body using the given db spec
</pre></div><div class="src-link"><a href="https://github.com/korma/Korma/blob/master/src/korma/db.clj#L298">view source</a></div></div></div></body></html>